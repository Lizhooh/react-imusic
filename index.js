'use strict';var _createClass=function(){function a(b,c){for(var g,f=0;f<c.length;f++)g=c[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}return function(b,c,f){return c&&a(b.prototype,c),f&&a(b,f),b}}(),_react=require('react'),_react2=_interopRequireDefault(_react),_propTypes=require('prop-types'),_propTypes2=_interopRequireDefault(_propTypes);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var DEBUG=!1,Music=function(a){function b(c){_classCallCheck(this,b);var f=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return f._debug=function(){},f._onProgress=function(g){f._debug('_onProgress'),f.props.onProgress(g)},f._onError=function(g){f._debug('_onError'),f.props.onError(g)},f._onLoadStart=function(g){f._debug('_onLoadstart'),f.props.onLoadStart(g)},f._onLoad=function(g){f._debug('_onLoad'),f.state.play&&f.audio.play(),0<f.props.initSeek&&f.seek(f.props.initSeek),f.props.onLoad(g)},f._onPlay=function(g){f._debug('_onPlay'),f.props.onPlay(g)},f._onPause=function(g){f._debug('_onPause'),f.props.onPause(g)},f._onEnd=function(g){f._debug('_onEnd'),f.props.onEnd(g)},f._onCanplay=function(g){f._debug('_onCanplay'),f.props.onCanplay(g)},f._onCanplayThrough=function(g){f._debug('_onCanplaythrough'),f.props.onCanplayThrough(g)},f._onRateChange=function(g){f._debug('_onRatechange'),f.props.onRateChange(g)},f._onDurationChange=function(g){f._debug('_onDurationchange'),f.props.onDurationChange(g)},f._onVolumeChange=function(g){f._debug('_onVolumechange'),f.props.onVolumeChange(g)},f._onSuspend=function(g){f._debug('_onSuspend'),f.props.onSuspend(g)},f._onLoadMetaData=function(g){f._debug('_onLoadMetaData'),f.props.onLoadMetaData(g)},f._onWaiting=function(g){f._debug('_onWaiting'),f.props.onWaiting(g)},f._onPlaying=function(g){f._debug('_onPlaying'),f.props.onPlaying(g)},f._onSeeking=function(g){f._debug('_onSeeking'),f.props.onSeeking(g)},f._onSeeked=function(g){f._debug('_onSeeked'),f.props.onSeeked(g)},f.reLoad=function(){return f.audio&&f.audio.load(),f},f.isPlay=function(){return!!f.audio&&f.audio.played},f.seek=function(g){f.audio&&(f.audio.currentTime=g)},f.state={play:!!c.autoPlay||c.play},f}return _inherits(b,a),_createClass(b,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(c){var f=this;c.play!==this.state.play&&this.setState({play:c.play},function(){f.audio&&c.play?f.audio.play():f.audio.pause()})}},{key:'componentDidMount',value:function componentDidMount(){var c=this;this.audio.ontimeupdate=function(){4===c.audio.readyState&&c._onProgress({currentTime:c.audio.currentTime,duration:c.audio.duration,seeking:c.audio.seeking,buffered:c.audio.buffered.end(0),seekable:c.audio.seekable.end(0),percent:(0|1e4*(c.audio.currentTime/c.audio.duration))/100,networkState:c.audio.networkState})},this.audio.onerror=this._onError,this.audio.onloadstart=this._onLoadStart,this.audio.onloadedmetadata=this._onLoadMetaData,this.audio.onloadeddata=this._onLoad,this.audio.onended=this._onEnd,this.audio.oncanplay=this._onCanplay,this.audio.oncanplaythrough=this._onCanplayThrough,this.audio.onratechange=this._onRateChange,this.audio.ondurationchange=this._onDurationChange,this.audio.onvolumechange=this._onVolumeChange,this.audio.onsuspend=this._onSuspend,this.audio.onwaiting=this._onWaiting,this.audio.onplaying=this._onPlaying,this.audio.onseeking=this._onSeeking,this.audio.onseeked=this._onSeeked}},{key:'componentWillUnmount',value:function componentWillUnmount(){this._timer&&clearTimeout(this._timer)}},{key:'render',value:function render(){var h=this,_props=this.props,c=_props.src,f=_props.autoPlay,g=_props.preload;return _react2.default.createElement('audio',{style:style,ref:function ref(j){return h.audio=j},src:c,autoPlay:f,preload:''+g,controls:!1})}}]),b}(_react.Component);Music.defaultProps={autoPlay:!1,src:null,preload:!0,initSeek:0,onProgress:function onProgress(a){return a},onError:function onError(a){return a},onLoadStart:function onLoadStart(a){return a},onLoadMetaData:function onLoadMetaData(a){return a},onLoad:function onLoad(a){return a},onPlay:function onPlay(a){return a},onPause:function onPause(a){return a},onEnd:function onEnd(a){return a},onCanplay:function onCanplay(a){return a},onCanplayThrough:function onCanplayThrough(a){return a},onRateChange:function onRateChange(a){return a},onDurationChange:function onDurationChange(a){return a},onVolumeChange:function onVolumeChange(a){return a},onSuspend:function onSuspend(a){return a},onWaiting:function onWaiting(a){return a},onPlaying:function onPlaying(a){return a},onSeeking:function onSeeking(a){return a},onSeeked:function onSeeked(a){return a}},Music.propTypes={autoPlay:_propTypes2.default.bool,src:_propTypes2.default.string,preload:_propTypes2.default.bool,initSeek:_propTypes2.default.number,onProgress:_propTypes2.default.func,onError:_propTypes2.default.func,onLoadStart:_propTypes2.default.func,onLoadMetaData:_propTypes2.default.func,onLoad:_propTypes2.default.func,onPlay:_propTypes2.default.func,onPause:_propTypes2.default.func,onEnd:_propTypes2.default.func,onCanplay:_propTypes2.default.func,onCanplayThrough:_propTypes2.default.func,onRateChange:_propTypes2.default.func,onDurationChange:_propTypes2.default.func,onVolumeChange:_propTypes2.default.func,onSuspend:_propTypes2.default.func,onWaiting:_propTypes2.default.func,onPlaying:_propTypes2.default.func,onSeeking:_propTypes2.default.func,onSeeked:_propTypes2.default.func},exports.default=Music;var style={width:0,height:0,overflow:'hidden'};